<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Telugu RTS Transliteration</title>
    <!-- Pure JS Library - No Pyodide/Python errors -->
    <script src="https://cdn.jsdelivr.net"></script>
    <style>
        #teluguBox {
            width: 100%; max-width: 600px; height: 150px;
            font-size: 1.2rem; padding: 15px;
            font-family: 'Gautami', 'Arial', sans-serif;
            border: 2px solid #ccc; border-radius: 8px;
        }
    </style>
</head>
<body>

    <h3>Telugu RTS Typing</h3>
    <p>Type in RTS (e.g., <b>amma</b>, <b>rAmudu</b>) and press <b>Space</b> or <b>Enter</b>.</p>
    <textarea id="teluguBox" placeholder="Type here..."></textarea>

    <script>
        const textBox = document.getElementById('teluguBox');

        textBox.addEventListener('keydown', (e) => {
            if (e.key === ' ' || e.key === 'Enter') {
                const cursor = textBox.selectionStart;
                const text = textBox.value;
                
                // Get the text before the cursor
                const beforeCursor = text.substring(0, cursor);
                const words = beforeCursor.split(/(\s+)/);
                const lastWord = words[words.length - 1];

                if (lastWord.trim().length > 0) {
                    // Convert last word from RTS (using ITRANS logic) to Telugu
                    // Note: 'itrans' is the closest standard to RTS in Sanscript
                    const converted = Sanscript.t(lastWord, 'itrans', 'telugu');
                    
                    const newBefore = words.slice(0, -1).join('') + converted;
                    const afterCursor = text.substring(cursor);
                    
                    textBox.value = newBefore + afterCursor;
                    
                    // Maintain cursor position
                    const newPos = newBefore.length;
                    textBox.setSelectionRange(newPos, newPos);
                }
            }
        });
    </script>
</body>
</html>
